from transformers import WhisperProcessor
import numpy as np

# Load processor (tokenizer + normalizer)
processor = WhisperProcessor.from_pretrained("sanchit-gandhi/whisper-small-hi")

# Your output token IDs from Android
# ids = [
#   50258, 50276, 50359, 50363, 3941, 94, 48521, 3941, 94, 48521, 8485, 94,
#   21981, 41858, 17937, 8485, 94, 21981, 41858, 17937, 48449, 8703, 234,
#   45938, 48521, 8485, 255, 21981, 41858, 17937, 8485, 255, 21981, 41858,
#   17937, 485, 3941, 94, 48521, 3941, 94, 48521, 8485, 94, 21981, 41858,
#   17937, 8485, 94, 21981, 41858, 17937, 48449, 8703, 234, 45938, 48521,
#   8485, 255, 21981, 41858, 17937, 8485, 255, 21981, 41858, 17937, 485,
#   3941, 105, 33279, 35082, 8485, 103, 21981, 3941, 237, 48521, 43372,
#   31945, 8485, 97, 33926, 8485, 245, 31881, 25411, 17937, 87, 21, 37139,
#   17937, 48268, 46758, 27099, 46758, 17937, 49316, 33926, 25411, 36158,
#   8485, 228, 3941, 103, 41858, 31881, 49316, 8703, 223, 3941, 255, 17937,
#   50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257
# ]
# Raw decoded: डमडम डेका डेका मौसम भेका भेका...डमडम डेका डेका मौसम भेका भेका...बिन पेएमैं तो गीराx6 हायल्ला सोरत आपकी सुभा
# Normalized Hindi: डमडम डक डक म सम भक भक डमडम डक डक म सम भक भक ब न पएम त ग र x 6 ह यलल स रत आपक सभ

# ids = [50258, 50276, 50359, 50363, 3941, 94, 48521, 12, 3941, 94, 48521, 12, 3941, 94, 33279, 41858, 17937, 3941, 253, 31881, 31970, 17937, 48449, 8703, 234, 45938, 48521, 8485, 255, 31881, 31970, 17937, 8485, 255, 31881, 31970, 17937, 485, 3941, 94, 48521, 12, 3941, 94, 48521, 12, 3941, 94, 31881, 41858, 17937, 3941, 253, 31881, 31970, 17937, 48449, 8703, 234, 45938, 48521, 8485, 255, 31881, 31970, 17937, 8485, 255, 31881, 31970, 17937, 485, 3941, 105, 33279, 35082, 8485, 103, 31881, 3941, 237, 48449, 43372, 31945, 8485, 97, 33926, 8485, 245, 31881, 25411, 17937, 87, 21, 37139, 43372, 48268, 46758, 27099, 46758, 17937, 49316, 8703, 224, 25411, 36158, 8485, 228, 3941, 103, 41858, 31881, 49316, 8703, 223, 3941, 255, 17937, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257]
# Raw decoded: डम-डम-डिकाटी का मौसम भी का भी का...डम-डम-डीकाटी का मौसम भी का भी का...बिन पीए मैं तो गीराx6 हैयल्ला सूरत आपकी सुभा
# Normalized Hindi: डम डम ड क ट क म सम भ क भ क डम डम ड क ट क म सम भ क भ क ब न प ए म त ग र x 6 हयलल सरत आपक सभ
# Decode

# ids = [50258, 50276, 50359, 50363, 3941, 94, 48521, 3941, 94, 48521, 8485, 94, 21981, 41858, 17937, 8485, 94, 21981, 41858, 17937, 48449, 8703, 234, 45938, 48521, 8485, 255, 21981, 41858, 17937, 8485, 255, 21981, 41858, 17937, 485, 3941, 94, 48521, 3941, 94, 48521, 8485, 94, 21981, 41858, 17937, 8485, 94, 21981, 41858, 17937, 48449, 8703, 234, 45938, 48521, 8485, 255, 21981, 41858, 17937, 8485, 255, 21981, 41858, 17937, 485, 3941, 105, 33279, 35082, 8485, 103, 21981, 3941, 237, 48521, 43372, 31945, 8485, 97, 33926, 8485, 245, 31881, 25411, 17937, 87, 21, 37139, 17937, 48268, 46758, 27099, 46758, 17937, 49316, 33926, 25411, 36158, 8485, 228, 3941, 103, 41858, 31881, 49316, 8703, 223, 3941, 255, 17937, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257]

# Raw decoded: डमडम डेका डेका मौसम भेका भेका...डमडम डेका डेका मौसम भेका भेका...बिन पेएमैं तो गीराx6 हायल्ला सोरत आपकी सुभा
# Normalized Hindi: डमडम डक डक म सम भक भक डमडम डक डक म सम भक भक ब न पएम त ग र x 6 ह यलल स रत आपक सभ
# ids = [50258, 50276, 50359, 50363, 3941, 94, 48521, 3941, 94, 48521, 8485, 94, 21981, 41858, 17937, 8485, 94, 21981, 41858, 17937, 48449, 8703, 234, 45938, 48521, 8485, 255, 21981, 41858, 17937, 8485, 255, 21981, 41858, 17937, 485, 3941, 94, 48521, 3941, 94, 48521, 8485, 94, 21981, 41858, 17937, 8485, 94, 21981, 41858, 17937, 48449, 8703, 234, 45938, 48521, 8485, 255, 21981, 41858, 17937, 8485, 255, 21981, 41858, 17937, 485, 3941, 105, 33279, 35082, 8485, 103, 21981, 3941, 237, 48521, 43372, 31945, 8485, 97, 33926, 8485, 245, 31881, 25411, 17937, 87, 21, 37139, 17937, 48268, 46758, 27099, 46758, 17937, 49316, 33926, 25411, 36158, 8485, 228, 3941, 103, 41858, 31881, 49316, 8703, 223, 3941, 255, 17937, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257
# ]
ids = [
    50258, 50276, 50359, 50363, 48521, 8703, 223, 3941, 251, 41858, 33926, 8485, 229, 36158, 35082, 17937, 8485, 105, 36158, 17937, 48268, 17937, 31970, 8703, 234, 3941, 230, 31970, 43372, 45938, 21981, 30, 8485, 97, 27099, 3941, 113, 36158, 49316, 21981, 8485, 99, 33279, 46758, 35082, 17937, 8485, 110, 3941, 245, 17937, 48268, 31970, 8703, 234, 3941, 230, 485, 25411, 3941, 105, 27099, 3941, 105, 17937, 8485, 101, 21981, 8485, 97, 8703, 223, 3941, 250, 41858, 33926, 8485, 105, 35082, 17937, 35082, 21981, 48449, 21981, 31945, 31970, 25411, 8485, 99, 33279, 48268, 17937, 8485, 242, 45938, 35082, 31970, 21981, 8485, 244, 17937, 46758, 31881, 8485, 98, 33279, 3941, 250, 33926, 25411, 33279, 48268, 17937, 31945, 485, 41858, 17937, 3941, 250, 46758, 31970, 21981, 49316, 33279, 48268, 17937, 3941, 237, 49316, 21981, 8485, 110, 33279, 3941, 244, 21981, 8485, 107, 17937, 8485, 97, 33926, 35082, 21981, 8485, 250, 17937, 35082, 21981, 31970, 33279, 36158, 35082, 21981, 485, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257, 50257

]

decoded = processor.batch_decode([ids], skip_special_tokens=True)[0]

# Apply text normalization (important for Whisper)
normalized = processor.tokenizer._normalize(decoded)

print("Raw decoded:", decoded)
print("Normalized Hindi:", normalized)
